# Better Markdown

Extended markdown-it plugins for Obsidian-style wikilinks, interactive checkboxes, callouts, footnotes, and more.

[![npm version](https://img.shields.io/npm/v/better-markdown.svg)](https://www.npmjs.com/package/better-markdown)
[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)

## Features

- üîó **Wikilinks** - Obsidian-style `[[note]]` linking with heading and block support
- ‚úÖ **Interactive Checkboxes** - `[ ]`, `[x]`, `[-]` with click-to-toggle
- üìª **Radio Buttons** - `( )` and `(x)` for single-choice options
- üì¢ **Callouts** - Beautiful alert boxes `(:warning: text :)`
- üìù **Footnotes** - Auto-numbered references `[^1]`
- üé® **Custom Syntax** - Simplified formatting (`/italic/`, `*bold*`, `=highlight=`, etc.)
- üîñ **Block IDs** - Direct linking to paragraphs `^block-id`
- üé≠ **And more** - Toggles, buttons, auto-linking for emails/phones/hashtags

## Installation

```bash
npm install better-markdown markdown-it
```

## Quick Start

```javascript
import MarkdownIt from 'markdown-it';
import { applyAllPlugins } from 'better-markdown';

const md = new MarkdownIt();
applyAllPlugins(md);

const html = md.render('[[My Note]] with a [[wikilink]]!');
```

## Individual Plugin Usage

Import only the plugins you need:

```javascript
import MarkdownIt from 'markdown-it';
import { markdownWikilinks, markdownCheckboxes } from 'better-markdown';

const md = new MarkdownIt();
md.use(markdownWikilinks);
md.use(markdownCheckboxes);
```

## Available Plugins

### Wikilinks

Obsidian-style note linking:

```markdown
[[Note Name]]                    # Basic wikilink
[[Note#Heading]]                 # Link to heading
[[Note^block-id]]                # Link to block
[[Long Note Name|Display Text]]  # Custom display
```

**Rendering**: Creates `<a class="wikilink">` with data attributes (`data-target`, `data-heading`, `data-block`)

### Checkboxes

Interactive task lists:

```markdown
[ ] Unchecked task
[x] Completed task
[-] Indeterminate/in-progress
```

### Radio Buttons

Single-choice lists:

```markdown
( ) Option A
(x) Option B (selected)
( ) Option C
```

### Callouts

Color-coded alert boxes:

```markdown
(:warning: This is important :)
(:info: Helpful information :)
(:question: Why does this happen? :)
(:custom-color: Custom styled :)
```

### Footnotes

Auto-numbered references:

```markdown
This is a citation[^1].

[*1] Footnote definition appears at bottom
```

### Custom Syntax

Simplified text formatting:

```markdown
*bold* or ** bold text **
/italic/ or // italic text //
_underline_ or __ underline text __
=highlight= or == highlight text ==
-strike- or -- strike text --
^superscript^
~subscript~
```

### Block IDs

Direct paragraph linking:

```markdown
This paragraph has an ID. ^my-block

Link to it: [[#^my-block]]
```

## Integration Examples

### CodeMirror 6

```javascript
import { EditorView } from '@codemirror/view';
import { markdown } from '@codemirror/lang-markdown';
import MarkdownIt from 'markdown-it';
import { applyAllPlugins } from 'better-markdown';

const md = new MarkdownIt();
applyAllPlugins(md);

new EditorView({
  extensions: [
    markdown({
      base: markdownLanguage,
      codeLanguages: languages
    })
  ],
  parent: document.body
});

// Render preview
const html = md.render(editorContent);
```

### React

```javascript
import { useState } from 'react';
import MarkdownIt from 'markdown-it';
import { applyAllPlugins } from 'better-markdown';

const md = new MarkdownIt();
applyAllPlugins(md);

function MarkdownEditor() {
  const [text, setText] = useState('');
  
  return (
    <div>
      <textarea value={text} onChange={e => setText(e.target.value)} />
      <div dangerouslySetInnerHTML={{ __html: md.render(text) }} />
    </div>
  );
}
```

### Handling Wikilink Clicks

```javascript
document.addEventListener('click', (e) => {
  if (e.target.classList.contains('wikilink')) {
    e.preventDefault();
    const target = e.target.dataset.target;
    const heading = e.target.dataset.heading;
    const blockId = e.target.dataset.block;
    
    // Implement your navigation logic
    navigateToNote(target, heading, blockId);
  }
});
```

## Utility Functions

```javascript
import { wikilinkUtils } from 'better-markdown';

// Extract all wikilinks from text
const links = wikilinkUtils.extractWikilinks(markdown);
// Returns: [{ target, heading, blockId, display, raw }]

// Extract all block IDs
const blockIds = wikilinkUtils.extractBlockIds(markdown);
// Returns: ['block-1', 'block-2', ...]

// Generate unique block ID
const id = wikilinkUtils.generateBlockId();
// Returns: 'block-abc123xyz'
```

## API Reference

### `applyAllPlugins(md)`

Convenience function that applies all plugins to a markdown-it instance.

**Parameters:**
- `md` (MarkdownIt): The markdown-it instance

**Returns:** The same markdown-it instance with all plugins applied

### Individual Plugins

All plugins follow the standard markdown-it plugin signature:

```javascript
function plugin(md, options) { ... }
```

- `customSyntaxPlugin` - Custom text formatting
- `markdownCheckboxes` - Interactive checkboxes
- `markdownRadios` - Radio button lists
- `markdownCallouts` - Alert boxes
- `markdownToggles` - Collapsible lists
- `markdownWikilinks` - Note linking
- `markdownBlockIds` - Block identifiers

## Styling

Better-markdown generates semantic HTML with appropriate classes. You'll need to add CSS for styling. See the [demo app](https://github.com/YOUR_USERNAME/better-markdown/tree/main/src) for example styles.

Example CSS for wikilinks:

```css
.wikilink {
  color: #7c3aed;
  background-color: rgba(124, 58, 237, 0.08);
  padding: 0.1em 0.3em;
  border-radius: 3px;
  text-decoration: none;
}
```

## Browser Compatibility

Works in all modern browsers and Node.js environments that support ES6+.

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

## License

MIT ¬© Better Markdown Contributors

## Roadmap

- [ ] TypeScript definitions
- [ ] React hooks package
- [ ] CSS stylesheet package
- [ ] Interactive playground
- [ ] Comprehensive test suite
